# FC Online Match Analyst Agent

FC Online ê²½ê¸° ë¶„ì„ RAG ì—ì´ì „íŠ¸

> ğŸš§ **êµ¬í˜„ ì¤‘**

## í”„ë¡œì íŠ¸ ê°œìš”

ë‚´ FC Online ê²½ê¸° ë°ì´í„°ì™€ ì»¤ë®¤ë‹ˆí‹° ê¸€ì„ ë¶„ì„í•˜ì—¬ ì§ˆë¬¸ì— ë‹µë³€í•˜ëŠ” RAG ì—ì´ì „íŠ¸ì…ë‹ˆë‹¤.

**ì˜ˆì‹œ ì§ˆë¬¸:**
- "ë‚´ê°€ ê³¨ ë§ì´ ë¨¹íŒ ì¥ë©´ì— ëŒ€í•´ ë§í•´ì¤˜"
- "í›„ë°˜ ë§‰íŒì— ì‹¤ì ì´ ë§ì€ë° ì™œ ê·¸ëŸ°ì§€ ë¶„ì„í•´ì¤˜"
- "ìš”ì¦˜ ë©”íƒ€ê°€ ë­ì•¼?"

## ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Data Pipeline                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Raw Data]         [Bronze]         [Silver]         [Gold]   â”‚
â”‚                                                                 â”‚
â”‚  API Response   â†’   matchDetail   â†’   Lv1 ë³€í™˜    â†’   RAG í…ìŠ¤íŠ¸ â”‚
â”‚  Community      â†’   posts.jsonl   â†’   (ì˜ˆì •)      â†’   (ì˜ˆì •)    â”‚
â”‚  Server Notice  â†’   notices.jsonl â†’   (ì˜ˆì •)      â†’   (ì˜ˆì •)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Agent Layer                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Vector DB]              [Tools]              [LLM]            â”‚
â”‚                                                                 â”‚
â”‚  ChromaDB            get_overall_stats()      GPT-4o / Claude   â”‚
â”‚  (match_summaries)   get_player_stats()                         â”‚
â”‚                      get_concede_patterns()                     â”‚
â”‚                      search_matches()                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## í´ë” êµ¬ì¡°

```
fconline-match-analyst-agent/
â”œâ”€â”€ backend/                           # ë°ì´í„° ìˆ˜ì§‘ & ì „ì²˜ë¦¬
â”‚   â”œâ”€â”€ api-fconline/                  # Nexon Open API í¬ë¡¤ëŸ¬
â”‚   â”‚   â””â”€â”€ src/crawler-ouid.py        # OUID ë° ë§¤ì¹˜ ë°ì´í„° ìˆ˜ì§‘
â”‚   â”œâ”€â”€ crawler-fconline-community/    # ì»¤ë®¤ë‹ˆí‹° í¬ë¡¤ëŸ¬
â”‚   â”œâ”€â”€ crawler-fconline-server-maintenance/  # ì„œë²„ ì ê²€ ê³µì§€ í¬ë¡¤ëŸ¬
â”‚   â””â”€â”€ data-preprocessing/            # ë°ì´í„° ì „ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ bronze_to_silver_lv1.py  # Bronze â†’ Silver ë³€í™˜
â”‚       â”‚   â”œâ”€â”€ silver_to_gold.py        # Silver â†’ Gold ë³€í™˜
â”‚       â”‚   â”œâ”€â”€ config.py                # ê²½ë¡œ ì„¤ì •
â”‚       â”‚   â””â”€â”€ utils/                   # ìœ í‹¸ë¦¬í‹°
â”‚       â”‚       â”œâ”€â”€ goaltime.py          # goalTime ì¸ì½”ë”©/ë””ì½”ë”©
â”‚       â”‚       â”œâ”€â”€ zone.py              # ì¢Œí‘œâ†’êµ¬ì—­ ë³€í™˜
â”‚       â”‚       â”œâ”€â”€ schema_desc.py       # ìŠˆíŒ…/ë§¤ì¹˜ì¢…ë£Œ íƒ€ì… ì„¤ëª…
â”‚       â”‚       â””â”€â”€ meta_loader.py       # ë©”íƒ€ë°ì´í„° ë¡œë” (ì‹±ê¸€í†¤)
â”‚       â””â”€â”€ meta/                        # ë©”íƒ€ë°ì´í„° (spid.json, seasonid.json ë“±)
â”‚
â”œâ”€â”€ data/                              # ë°ì´í„° ì €ì¥ì†Œ (gitignore)
â”‚   â”œâ”€â”€ bronze/                        # Raw â†’ ì •ê·œí™”ëœ JSON
â”‚   â”‚   â””â”€â”€ matchDetail/*.jsonl
â”‚   â”œâ”€â”€ silver/                        # ë³€í™˜ëœ ë°ì´í„°
â”‚   â”‚   â””â”€â”€ lv1/*.jsonl
â”‚   â”œâ”€â”€ gold/                          # RAG/Toolìš© ìµœì¢… ë°ì´í„°
â”‚   â”‚   â”œâ”€â”€ match_summaries/
â”‚   â”‚   â”‚   â”œâ”€â”€ match_summaries.jsonl  # ê²½ê¸°ë³„ ìì—°ì–´ ì„œìˆ  (RAGìš©)
â”‚   â”‚   â”‚   â”œâ”€â”€ overall_stats.json     # ì „ì²´ í†µê³„
â”‚   â”‚   â”‚   â”œâ”€â”€ time_zone_stats.json   # ì‹œê°„ëŒ€ë³„ ë“ì /ì‹¤ì  íŒ¨í„´
â”‚   â”‚   â”‚   â”œâ”€â”€ zone_stats.json        # êµ¬ì—­ë³„ ìŠˆíŒ… í†µê³„
â”‚   â”‚   â”‚   â”œâ”€â”€ concede_patterns.json  # ì‹¤ì  íŒ¨í„´ ë¶„ì„
â”‚   â”‚   â”‚   â””â”€â”€ player_stats.json      # ì„ ìˆ˜ë³„ ëˆ„ì  í†µê³„
â”‚   â”‚   â”œâ”€â”€ community/                 # (ì˜ˆì •)
â”‚   â”‚   â””â”€â”€ server-maintenance/        # (ì˜ˆì •)
â”‚   â””â”€â”€ vectordb/                      # ChromaDB ë²¡í„° ì €ì¥ì†Œ
â”‚
â”œâ”€â”€ agent/                             # RAG ì—ì´ì „íŠ¸ (ì˜ˆì •)
â”œâ”€â”€ app/                               # Streamlit UI (ì˜ˆì •)
â”œâ”€â”€ scripts/                           # ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ .env                               # API í‚¤
â””â”€â”€ requirements.txt                   # Python ì˜ì¡´ì„±
```

## ë°ì´í„° íŒŒì´í”„ë¼ì¸

### 1. Bronze Layer (ìˆ˜ì§‘ëœ ì›ë³¸ ë°ì´í„°)
- Nexon APIì—ì„œ ìˆ˜ì§‘í•œ matchDetail ì›ë³¸
- ì»¤ë®¤ë‹ˆí‹° ê²Œì‹œê¸€ ì›ë³¸
- ì„œë²„ ì ê²€ ê³µì§€ ì›ë³¸

### 2. Silver Layer (ì •ê·œí™”/ë³€í™˜ ë°ì´í„°)
- **Lv1 ë³€í™˜**: ì„ ìˆ˜ëª… ë§¤í•‘, goalTime ë””ì½”ë”©, êµ¬ì—­ ì •ë³´ ì¶”ê°€
- goalTime ì¸ì½”ë”©: `BASE = 2^24`, ì „ë°˜(+0s), í›„ë°˜(+2700s), ì—°ì¥(+5400s/+6300s), ìŠ¹ë¶€ì°¨ê¸°(+7200s)
- Zone ì‹œìŠ¤í…œ: 19ê°œ êµ¬ì—­ (xì¶• 6ë“±ë¶„ Ã— yì¶• 3ë“±ë¶„ + ê²½ê¸°ì¥ì™¸ê°)

### 3. Gold Layer (RAG/Toolìš© ìµœì¢… ë°ì´í„°)
- **match_summaries.jsonl**: ê²½ê¸°ë³„ ìì—°ì–´ ì„œìˆ  (Vector DB ì„ë² ë”©ìš©)
  ```
  "í˜¸ë‚ ë‘(26ì‹œì¦Œ, +5ê°•)ì´ ì „ë°˜ 23ë¶„ ì™¼ìª½ í˜ë„í‹°ë°•ìŠ¤ì—ì„œ ë“ì , ì–´ì‹œìŠ¤íŠ¸ êµ¬ì—­: ìƒëŒ€ ì¤‘ì•™ ë¯¸ë“œí•„ë” ì§€ì—­"
  ```
- **overall_stats.json**: ìŠ¹ë¥ , í‰ê·  ë“ì /ì‹¤ì  ë“± ì „ì²´ í†µê³„
- **time_zone_stats.json**: ì‹œê°„ëŒ€ë³„ ë“ì /ì‹¤ì  íŒ¨í„´
- **zone_stats.json**: êµ¬ì—­ë³„ ìŠˆíŒ… í†µê³„
- **concede_patterns.json**: ì‹¤ì  íŒ¨í„´ ë¶„ì„
- **player_stats.json**: ì„ ìˆ˜ë³„ ëˆ„ì  í†µê³„

## ë°ì´í„° ì¶œì²˜

| ë°ì´í„° | ì¶œì²˜ | ìˆ˜ì§‘ í•­ëª© |
|--------|------|----------|
| API ë°ì´í„° | [Nexon Open API](https://openapi.nexon.com/ko/game/fconline/) | ìœ ì € OUID, ë§¤ì¹˜ ê¸°ë¡, ì„ ìˆ˜/ì‹œì¦Œ ë©”íƒ€ë°ì´í„° |
| ì»¤ë®¤ë‹ˆí‹° | [FC Online ììœ ê²Œì‹œíŒ](https://fconline.nexon.com/community/free) | ê²Œì‹œê¸€ ì œëª©, ë‚´ìš©, ìŠ¤ì¿¼ë“œ ë©”ì´ì»¤ ì •ë³´ |
| ì„œë²„ ì ê²€ | [FC Online ê³µì§€ì‚¬í•­](https://fconline.nexon.com/news/notice/list) | ì ê²€ ê³µì§€ ì œëª©, ë‚´ìš©, ë‚ ì§œ |

## ê¸°ìˆ  ìŠ¤íƒ

- **Data Pipeline**: Python, JSON/JSONL
- **RAG Framework**: LangChain / LangGraph (ì˜ˆì •)
- **Vector DB**: ChromaDB (ì˜ˆì •)
- **Embedding**: OpenAI text-embedding-3-small (ì˜ˆì •)
- **LLM**: GPT-4o / Claude (ì˜ˆì •)
- **Frontend**: Streamlit (ì˜ˆì •)

## ì‹¤í–‰ ë°©ë²•

### 1. í™˜ê²½ ì„¤ì •
```bash
# ê°€ìƒí™˜ê²½ ìƒì„± ë° í™œì„±í™”
python -m venv .venv
source .venv/bin/activate

# ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt

# í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cp .env.example .env
# .env íŒŒì¼ì— NEXON_API_KEY ì„¤ì •
```

### 2. ë°ì´í„° ìˆ˜ì§‘ (í¬ë¡¤ëŸ¬)
```bash
# API ë°ì´í„° ìˆ˜ì§‘
cd backend/api-fconline
python src/crawler-ouid.py

# ì»¤ë®¤ë‹ˆí‹° í¬ë¡¤ë§
cd backend/crawler-fconline-community
npm install && npm run crawl

# ì„œë²„ ì ê²€ ê³µì§€ í¬ë¡¤ë§
cd backend/crawler-fconline-server-maintenance
npm install && npm run crawl
```

### 3. íƒ€ê²Ÿ ìœ ì € ì„¤ì •
ë¶„ì„í•  ìœ ì €ì˜ OUIDë¥¼ ì„¤ì •í•©ë‹ˆë‹¤:
```python
# backend/data-preprocessing/src/config.py
TARGET_OUID = "8f0b662aaa013843b965a3c6fac7e8a9"  # ì˜ˆì‹œ: ì² ë§ˆì‚°í˜¸ë‘ì´
```

OUIDëŠ” Nexon Open APIì—ì„œ ë‹‰ë„¤ì„ìœ¼ë¡œ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 4. ë°ì´í„° ì „ì²˜ë¦¬
```bash
cd backend/data-preprocessing/src

# Bronze â†’ Silver ë³€í™˜
python bronze_to_silver_lv1.py

# Silver â†’ Gold ë³€í™˜
python silver_to_gold.py
```

### 5. ì—ì´ì „íŠ¸ ì‹¤í–‰ (ì˜ˆì •)
```bash
# ë°ì´í„° ì¸ë±ì‹±
python scripts/index_matches.py

# Streamlit ì•± ì‹¤í–‰
streamlit run app/main.py
```

## ì§„í–‰ ìƒí™©

- [x] ë°ì´í„° ìˆ˜ì§‘ (API, ì»¤ë®¤ë‹ˆí‹°, ì„œë²„ì ê²€)
- [x] Bronze â†’ Silver ë³€í™˜
- [x] Silver â†’ Gold ë³€í™˜ (match_summaries)
- [ ] Vector DB êµ¬ì¶• (ChromaDB)
- [ ] Tool í•¨ìˆ˜ êµ¬í˜„
- [ ] RAG Agent êµ¬í˜„
- [ ] Streamlit UI